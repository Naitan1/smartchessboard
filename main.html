<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Chessboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="icon" href="./IMG_5982.webp" type="image/x-icon" />
  <link rel="stylesheet" href="./main.css" />
  <link rel="stylesheet" href="./particle.css" />
  <link rel="stylesheet" href="./explosion.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <!-- Minimal responsive helpers so text scales nicely on mobile -->
  <style>
    :root {
      --max-content-width: 1100px;
    }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      grid-template-rows: auto 1fr auto;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Layering so your particles stay behind content */
    #particles {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    .page-wrap {
      position: relative;
      z-index: 1;
      inline-size: min(100%, var(--max-content-width));
      padding: clamp(12px, 3vw, 32px);
      display: grid;
      justify-items: center;
      gap: clamp(16px, 3.5vw, 32px);
    }

    .title {
      font-family: "Press Start 2P", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      text-align: center;
      line-height: 1.15;
      /* Scales from small phones to desktop */
      font-size: clamp(22px, 7vw, 64px);
      letter-spacing: 0.5px;
      text-wrap: balance;
    }

    .button-container {
      display: grid;
      grid-auto-flow: row;
      gap: clamp(10px, 3vw, 18px);
      width: min(92%, 520px);
      justify-items: stretch;
    }

    .menu-button {
      appearance: none;
      border: none;
      border-radius: 14px;
      padding: clamp(12px, 3.2vw, 18px) clamp(16px, 5vw, 28px);
      font-size: clamp(14px, 3.4vw, 22px);
      font-weight: 700;
      line-height: 1.2;
      cursor: pointer;
      background: #111;
      color: #fff;
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
      transition: transform .08s ease, box-shadow .15s ease, opacity .2s ease;
      touch-action: manipulation;
    }
    .menu-button:active { transform: translateY(2px) scale(0.99); }
    .menu-button:focus-visible { outline: 3px solid #4c8bf5; outline-offset: 2px; }

    /* Top-center language switcher */
    .lang-switch {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: inline-flex;
      gap: 8px;
      align-items: center;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(6px);
      box-shadow: 0 4px 14px rgba(0,0,0,0.12);
      font-size: 14px;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .lang-switch button {
      border: 0;
      padding: 6px 10px;
      border-radius: 999px;
      background: transparent;
      cursor: pointer;
      font-weight: 600;
    }
    .lang-switch button.active {
      background: #111;
      color: #fff;
    }

    /* Safe area for notches */
    .safe-bottom {
      height: env(safe-area-inset-bottom, 0);
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="particles"></div> <!-- Particle layer -->

  <!-- Language Switcher (auto-wired by script, but placing a container keeps layout tidy) -->
  <div id="lang-switcher" class="lang-switch" aria-label="Language switch">
    <button type="button" data-lang="en" aria-pressed="true">English</button>
    <span>•</span>
    <button type="button" data-lang="th" aria-pressed="false">ไทย</button>
  </div>

  <main class="page-wrap">
    <div class="title" data-i18n="hero.title">Smart Chessboard</div>
    <div class="button-container">
      <button class="menu-button" data-i18n="home.play"
              onclick="window.location.href='./play/main.html'">Play</button>
      <button class="menu-button" data-i18n="home.info"
              onclick="window.location.href='./info/main.html'">Information</button>
    </div>
  </main>

  <div class="safe-bottom" aria-hidden="true"></div>

  <!-- Your existing scripts -->
  <script src="./particle.js"></script>
  <script src="./explosion.js"></script>

  <!-- i18n script: top-middle switch, persists, supports text/html/placeholder/title/aria -->
  <script>
  (function () {
    const I18N = {
      current: 'en',
      dict: {
        en: {
          // English is your baseline in the HTML.
          // You can add English values here if you ever want to control them via code.
        },
        th: {
          /* ==== Home page strings ==== */
          "hero.title": "กระดานหทากรุกอัจฉริยะ",
          "home.play": "เริ่มเล่น",
          "home.info": "ข้อมูล",

          /* ==== If you use these keys on other pages later, they’re ready ==== */
          "nav.home": "หน้าแรก",
          "nav.about": "เกี่ยวกับเรา",
          "nav.features": "ฟีเจอร์",
          "nav.pricing": "ราคา",
          "nav.contact": "ติดต่อเรา",
          "nav.docs": "เอกสาร",
          "nav.getStarted": "เริ่มต้นใช้งาน",

          "hero.subtitle": "กระดานหมากรุกอัจฉริยะสำหรับการเรียนรู้และความสนุก",
          "hero.desc": "กระดานหมากรุกแบบโต้ตอบที่มีเซ็นเซอร์และไฟ LED ในแต่ละช่อง",
          "btn.learnMore": "ดูเพิ่มเติม",
          "btn.download": "ดาวน์โหลด",
          "btn.copy": "คัดลอก",
          "btn.save": "บันทึก",
          "btn.cancel": "ยกเลิก",
          "btn.close": "ปิด",

          "msg.loading": "กำลังโหลด…",
          "msg.saving": "กำลังบันทึก…",
          "msg.saved": "บันทึกแล้ว",
          "msg.error": "เกิดข้อผิดพลาด โปรดลองอีกครั้ง",
          "msg.network": "การเชื่อมต่อขัดข้อง ตรวจสอบอินเทอร์เน็ตของคุณ",
        }
      },

      init() {
        const saved = localStorage.getItem('lang');
        this.current = saved || 'en';
        document.documentElement.setAttribute('lang', this.current);
        this.prepareAll(document);
        this.apply(this.current);
        this.wireSwitcher();
        this.observe();
      },

      wireSwitcher() {
        const wrap = document.getElementById('lang-switcher');
        if (!wrap) return;
        const btnEN = wrap.querySelector('button[data-lang="en"]');
        const btnTH = wrap.querySelector('button[data-lang="th"]');

        const setActive = (lang) => {
          btnEN.classList.toggle('active', lang === 'en');
          btnTH.classList.toggle('active', lang === 'th');
          btnEN.setAttribute('aria-pressed', String(lang === 'en'));
          btnTH.setAttribute('aria-pressed', String(lang === 'th'));
        };
        setActive(this.current);

        wrap.addEventListener('click', (e) => {
          const btn = e.target.closest('button[data-lang]');
          if (!btn) return;
          const lang = btn.dataset.lang;
          if (!this.dict[lang]) return;
          this.current = lang;
          localStorage.setItem('lang', lang);
          document.documentElement.setAttribute('lang', lang);
          this.apply(lang);
          setActive(lang);
        });
      },

      apply(lang) {
        const dict = this.dict[lang] || {};
        // textContent
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const k = el.getAttribute('data-i18n');
          const base = el.dataset.i18nEn ?? el.textContent;
          if (lang === 'en') {
            el.textContent = base;
          } else if (k in dict) {
            el.textContent = dict[k];
          }
        });
        // innerHTML
        document.querySelectorAll('[data-i18n-html]').forEach(el => {
          const k = el.getAttribute('data-i18n-html');
          const base = el.dataset.i18nHtmlEn ?? el.innerHTML;
          if (lang === 'en') {
            el.innerHTML = base;
          } else if (k in dict) {
            el.innerHTML = dict[k];
          }
        });
        // placeholder
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
          const k = el.getAttribute('data-i18n-placeholder');
          const base = el.dataset.i18nPhEn ?? el.getAttribute('placeholder') ?? '';
          if (lang === 'en') {
            el.setAttribute('placeholder', base);
          } else if (k in dict) {
            el.setAttribute('placeholder', dict[k]);
          }
        });
        // title
        document.querySelectorAll('[data-i18n-title]').forEach(el => {
          const k = el.getAttribute('data-i18n-title');
          const base = el.dataset.i18nTitleEn ?? el.getAttribute('title') ?? '';
          if (lang === 'en') {
            el.setAttribute('title', base);
          } else if (k in dict) {
            el.setAttribute('title', dict[k]);
          }
        });
        // aria-label
        document.querySelectorAll('[data-i18n-aria]').forEach(el => {
          const k = el.getAttribute('data-i18n-aria');
          const base = el.dataset.i18nAriaEn ?? el.getAttribute('aria-label') ?? '';
          if (lang === 'en') {
            el.setAttribute('aria-label', base);
          } else if (k in dict) {
            el.setAttribute('aria-label', dict[k]);
          }
        });
      },

      // Save English baseline so we can switch back without reload
      prepareAll(root) {
        root.querySelectorAll('[data-i18n]').forEach(el => {
          if (el.dataset.i18nEn == null) el.dataset.i18nEn = el.textContent;
        });
        root.querySelectorAll('[data-i18n-html]').forEach(el => {
          if (el.dataset.i18nHtmlEn == null) el.dataset.i18nHtmlEn = el.innerHTML;
        });
        root.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
          if (el.dataset.i18nPhEn == null) el.dataset.i18nPhEn = el.getAttribute('placeholder') ?? '';
        });
        root.querySelectorAll('[data-i18n-title]').forEach(el => {
          if (el.dataset.i18nTitleEn == null) el.dataset.i18nTitleEn = el.getAttribute('title') ?? '';
        });
        root.querySelectorAll('[data-i18n-aria]').forEach(el => {
          if (el.dataset.i18nAriaEn == null) el.dataset.i18nAriaEn = el.getAttribute('aria-label') ?? '';
        });
      },

      observe() {
        const mo = new MutationObserver(muts => {
          let needsApply = false;
          for (const m of muts) {
            m.addedNodes.forEach(node => {
              if (!(node instanceof Element)) return;
              this.prepareAll(node);
              needsApply = true;
            });
            if (m.type === 'attributes' && m.target instanceof Element) {
              const el = m.target;
              if (['data-i18n','data-i18n-html','data-i18n-placeholder','data-i18n-title','data-i18n-aria'].includes(m.attributeName)) {
                this.prepareAll(el);
                needsApply = true;
              }
            }
          }
          if (needsApply) this.apply(this.current);
        });
        mo.observe(document.documentElement, {
          subtree: true,
          childList: true,
          attributes: true,
          attributeFilter: ['data-i18n','data-i18n-html','data-i18n-placeholder','data-i18n-title','data-i18n-aria']
        });
      }
    };

    document.addEventListener('DOMContentLoaded', () => I18N.init());
    window.I18N = I18N; // optional: for debugging in console
  })();
  </script>
</body>
</html>
