<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Chessboard | Information</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <link rel="icon" href="./api.IMG_5982.webp" type="image/x-icon" />
  <link rel="stylesheet" href="./info.css" />
  <link rel="stylesheet" href="./info.particle.css" />
  <link rel="stylesheet" href="./ext.explosion.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <style>
    :root { --maxw: 1200px; --measure: 85ch; }

    body {
      margin: 0;
      min-height: 100svh;
      color: #fff;
      font-family: "Press Start 2P", cursive, system-ui, sans-serif;
    }

    #particles { position: fixed; inset: 0; z-index: 0; }

    .page {
      position: relative;
      z-index: 1;
      padding: clamp(8px, 2vw, 16px) clamp(12px, 3vw, 24px);
      display: grid;
      justify-items: center;
      gap: clamp(10px, 2vw, 20px);
    }

    /* Back button (retro) */
    .back-button {
      position: fixed;
      top: max(12px, env(safe-area-inset-top));
      left: max(12px, env(safe-area-inset-left));
      font-family: "Press Start 2P", cursive;
      font-size: clamp(10px, 2.8vw, 12px);
      padding: clamp(8px, 2.6vw, 10px) clamp(12px, 3.4vw, 16px);
      background-color: white; color: black;
      border: 2px solid black; border-radius: 10px;
      text-decoration: none; cursor: pointer;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
      transition: background-color .2s, box-shadow .2s, transform .1s;
      z-index: 10000; -webkit-tap-highlight-color: transparent;
    }
    .back-button:hover { background-color: #eee; }
    .back-button:active { transform: scale(0.98); }

    /* === iOS-style language switch (no dot) === */
    .lang-switch {
      position: fixed;
      top: max(10px, env(safe-area-inset-top));
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(20,20,20,0.6);
      backdrop-filter: blur(6px);
      box-shadow: 0 0 6px rgba(255,255,255,0.15);
    }
    .lang-switch .lang-label {
      font-family: "Press Start 2P", cursive;
      font-size: 10px;
      color: #fff;
      opacity: 0.85;
      user-select: none;
    }
    #langToggle { position: absolute; opacity: 0; width: 0; height: 0; }

    .toggle {
      position: relative;
      width: 56px; height: 32px;
      border-radius: 999px;
      display: inline-block;
      background: #bbb; /* OFF = EN */
      border: 1px solid rgba(255,255,255,0.35);
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35),
                  0 0 6px rgba(255,255,255,0.25);
      cursor: pointer;
      transition: background 180ms ease, box-shadow 180ms ease;
    }
    .toggle .knob {
      position: absolute;
      top: 3px; left: 3px; /* OFF position */
      width: 26px; height: 26px; border-radius: 50%;
      background: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
      transition: left 180ms ease;
    }
    #langToggle:checked + .toggle {
      background: #34c759; /* ON (Thai) */
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.35),
                  0 0 8px rgba(255,255,255,0.35);
    }
    #langToggle:checked + .toggle .knob { left: 27px; }
    #langToggle:focus + .toggle { outline: 2px solid #9cf; outline-offset: 2px; }

    @media (max-width: 400px) {
      .toggle { width: 50px; height: 28px; }
      .toggle .knob { width: 22px; height: 22px; top: 3px; left: 3px; }
      #langToggle:checked + .toggle .knob { left: 25px; }
    }

    /* Info content: classic font only here */
    .title { font-family: "Press Start 2P", cursive; text-align: center; }
    .info-wrap { width: min(100%, var(--maxw)); }
    .info-kicker, .info-text { font-family: "Times New Roman", Georgia, serif; }
    .info-columns .info-text { break-inside: avoid; max-inline-size: none; }

    .safe-bottom { height: env(safe-area-inset-bottom, 0); width: 100%; }
  </style>
</head>
<body>
  <div id="particles"></div>

  <a href="../main.html" class="back-button" data-i18n="back.label" data-i18n-title="back.label" title="Back">&#8592; Back</a>

  <!-- Language switch (iOS-style) -->
  <div id="lang-switcher" class="lang-switch" aria-label="Language switch">
    <span class="lang-label left">EN</span>
    <input id="langToggle" type="checkbox" aria-label="Toggle Thai language" />
    <label for="langToggle" class="toggle"><span class="knob"></span></label>
    <span class="lang-label right">ไทย</span>
  </div>

  <main class="page">
    <h1 class="title" data-i18n="info.title">Information</h1>

    <section class="info-wrap">
      <div class="info-kicker-wrap" style="display:grid;place-items:center;margin:8px 0 16px;">
        <p class="info-kicker" data-i18n-html="info.kicker">
          <em>*This is a simulation of a real Smart Chessboard*</em>
        </p>
      </div>

      <div class="info-columns" style="max-width:var(--maxw);margin-inline:auto;">
        <p class="info-text" data-i18n="info.p1">
          The Smart Chessboard is a project designed to both teach new players and provide a unique and enjoyable experience for chess enthusiasts. It incorporates several innovative features.
        </p>
        <p class="info-text" data-i18n="info.p2">
          The first is the pattern system: each tile on the 8x8 board is equipped with a sensor and an LED. Every chess piece is fitted with a QR code at its base. When a piece is lifted, the sensor detects its absence and the LEDs will display the movement patterns available to that piece—whether it can move, capture, or put the opponent in check.
        </p>
        <p class="info-text" data-i18n="info.p3">
          Additionally, the Smart Chessboard is accompanied by a side screen containing a variety of tools. These include a timer, buttons to start and reset the game clock, and mode selection options: Human vs Human or AI vs Human. When choosing to play against the AI, players can select the opponent’s Elo rating or difficulty level, powered by the Stockfish API. The screen also displays both the player’s moves and the AI’s responses in real time.
        </p>
      </div>
    </section>
  </main>

  <div class="safe-bottom" aria-hidden="true"></div>

  <script src="./info.particle.js"></script>
  <script src="./ext.explosion.js"></script>

  <!-- i18n script -->
  <script>
  (function () {
    const I18N = {
      current: 'en',
      dict: {
        en: {},
        th: {
          "back.label": "← ย้อนกลับ",
          "info.title": "ข้อมูล",
          "info.kicker": "<em>*นี่เป็นเพียงการจำลองของกระดานหมากรุกอัจฉริยะ (Smart Chessboard) จริง*</em>",
          "info.p1": "Smart Chessboard เป็นโครงการที่ถูกพัฒนาขึ้นเพื่อใช้ในการสอนผู้เล่นใหม่ และเพื่อมอบประสบการณ์ที่แปลกใหม่และสนุกสนานให้กับผู้ที่ชื่นชอบหมากรุก โดยได้มีการผสานฟังก์ชันที่โดดเด่นหลายประการเข้าไว้ด้วยกัน",
          "info.p2": "คุณสมบัติแรกคือ ระบบแสดงรูปแบบการเดิน (Pattern System): แต่ละช่องบนกระดานขนาด 8x8 ติดตั้งเซ็นเซอร์และไฟ LED ไว้ภายใน ขณะเดียวกันหมากรุกแต่ละตัวจะมี QR Code อยู่ด้านล่าง เมื่อหมากถูกยกออก เซ็นเซอร์จะตรวจจับได้ และไฟ LED จะแสดงรูปแบบการเดินของหมากตัวนั้น ไม่ว่าจะเป็นการเดิน การกิน หรือการเข้าตาจน",
          "info.p3": "นอกจากนี้ กระดานยังมาพร้อมกับ หน้าจอเสริมด้านข้าง ซึ่งมีเครื่องมือหลากหลาย เช่น นาฬิกาจับเวลา ปุ่มเริ่มและรีเซ็ตเวลา รวมถึงตัวเลือกโหมดการเล่น ได้แก่ ผู้เล่นกับผู้เล่น หรือ ผู้เล่นกับ AI หากเลือกเล่นกับ AI ผู้เล่นสามารถกำหนดระดับ Elo หรือความยากของคู่ต่อสู้ได้ โดยระบบนี้เชื่อมต่อกับ API ของ Stockfish และหน้าจอจะแสดงการเดินหมากของผู้เล่นและ AI แบบเรียลไทม์"
        }
      },

      init() {
        // First load: force EN
        const saved = localStorage.getItem('lang');
        if (!saved) localStorage.setItem('lang', 'en');
        this.current = (saved === 'th') ? 'th' : 'en';
        document.documentElement.setAttribute('lang', this.current);

        this.prepareAll(document);
        this.apply(this.current);
        this.wireSwitcher();
      },

      wireSwitcher() {
        const wrap = document.getElementById('lang-switcher');
        const toggle = document.getElementById('langToggle');
        if (!wrap || !toggle) return;

        // ON (checked) = TH, OFF = EN
        toggle.checked = (this.current === 'th');

        const left = wrap.querySelector('.lang-label.left');
        const right = wrap.querySelector('.lang-label.right');
        const updateLabels = () => {
          if (left) left.style.opacity = toggle.checked ? '0.6' : '1';
          if (right) right.style.opacity = toggle.checked ? '1' : '0.6';
        };
        updateLabels();

        toggle.addEventListener('change', () => {
          const lang = toggle.checked ? 'th' : 'en';
          this.current = lang;
          localStorage.setItem('lang', lang);
          document.documentElement.setAttribute('lang', lang);
          this.apply(lang);
          updateLabels();
        });
      },

      apply(lang) {
        const dict = this.dict[lang] || {};
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const k = el.getAttribute('data-i18n');
          const base = el.dataset.i18nEn ?? el.textContent;
          if (lang === 'en') el.textContent = base;
          else if (k in dict) el.textContent = dict[k];
        });
        document.querySelectorAll('[data-i18n-html]').forEach(el => {
          const k = el.getAttribute('data-i18n-html');
          const base = el.dataset.i18nHtmlEn ?? el.innerHTML;
          if (lang === 'en') el.innerHTML = base;
          else if (k in dict) el.innerHTML = dict[k];
        });
      },

      prepareAll(root) {
        root.querySelectorAll('[data-i18n]').forEach(el => {
          if (el.dataset.i18nEn == null) el.dataset.i18nEn = el.textContent;
        });
        root.querySelectorAll('[data-i18n-html]').forEach(el => {
          if (el.dataset.i18nHtmlEn == null) el.dataset.i18nHtmlEn = el.innerHTML;
        });
      }
    };

    document.addEventListener('DOMContentLoaded', () => I18N.init());
  })();
  </script>
</body>
</html>
